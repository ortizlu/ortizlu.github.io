<!DOCTYPE html><html lang="en-US"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="theme-color" content="#1f1f1f"/><meta data-react-helmet="true" name="msapplication-TileImage" content="/ms-icon-144x144.png"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#1f1f1f"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" http-equiv="X-UA-Compatible" content="IE=edge"/><meta data-react-helmet="true" charSet="utf-8"/><meta name="generator" content="Gatsby 4.10.0"/><style data-href="/styles.951bcbc7033318f1a8f8.css" data-identity="gatsby-global-css">.circle{border:4px solid #fdfdfd;border-radius:50%;height:20rem;margin:5rem auto 0;position:relative;width:20rem}.circle__text{background-color:#1f1f1f;font-size:2.6rem;font-weight:700;position:absolute;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.circle__text--blue{color:#01bdff;margin-right:-4px}.circle__shape{color:#fdfdfd;left:28%;top:46%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:100%;z-index:2}.circle__email{color:#fdfdfd;left:-10%;top:52%}.footer{align-items:center;display:flex;justify-content:center;padding:3.2rem 0 1.6rem}.footer__year{margin-left:-5px}.desktop-navbar{display:flex;-moz-flex-direction:column;flex-direction:column;margin:0 auto;width:150px}@media(min-width:600px){.desktop-navbar{-webkit-box-ortient:vertical;-ms-flex-pack:space-between;align-items:center;display:flex;-moz-flex-direction:row;flex-direction:row;-moz-justify-content:space-between;-ms-justify-content:space-between;justify-content:space-between;width:90%}}.alternate-header{align-items:center;flex-direction:column;height:auto;width:auto}.alternate-header,.menu{display:flex;justify-content:space-between}.menu{margin:2rem auto 0;width:100%}@media(min-width:600px){.menu{justify-content:flex-start;order:-1}}.blog-btn-desktop:active,.blog-btn-desktop:focus,.blog-btn-desktop:hover,.home-btn-desktop:active,.home-btn-desktop:focus,.home-btn-desktop:hover,.projects-btn-desktop:active,.projects-btn-desktop:focus,.projects-btn-desktop:hover,.resume-btn-desktop:active,.resume-btn-desktop:focus,.resume-btn-desktop:hover{color:#01bdff}@media(min-width:600px){.home-btn-desktop,.projects-btn-desktop{margin:0 20px}}.social-menu{align-items:center;display:flex;justify-content:space-between;margin-top:2rem;order:-1}@media(min-width:600px){.social-menu{order:0;width:200px}}.article-image{background-size:cover;border:10px solid #909090;box-shadow:15px 15px 2px #0c0c0c;height:30rem;margin-left:2rem;margin-right:2rem}@media(min-width:900px){.article-image{height:35rem}}.article-content{margin-top:4rem}.article-body{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.3rem;font-weight:300!important;margin:0 2rem}.article-body h1{font-size:2.5rem;margin:2rem 0 1rem}.article-body h2{font-size:2rem;margin:2rem 0 1rem;text-decoration:underline}.article-body h3{font-size:1.8rem;margin:2rem 0 1rem}.article-body a:active,.article-body a:focus,.article-body a:hover{color:#01bdff}.article-body ol,.article-body ul{list-style:disc}.article-body code{background-color:#e7e7e7;border-radius:10px;color:#000;font-family:DotGothic16,sans-serif;padding:0 6px}@media(min-width:1000px){.article-content{margin:4rem auto 0;max-width:1000px}}.article-body__text{line-height:1.5;margin-top:2rem}.article-body__text>p{margin:1rem 0}.back-btn{font-size:1rem;margin:0 0 1rem 2rem}@media(min-width:1200px){.back-btn{margin:1 0 1rem}}.back-btn__link:active,.back-btn__link:focus,.back-btn__link:hover,.link:active,.link:focus,.link:hover{color:#01bdff}.article-body__date{font-size:1.2rem}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{border:0;font-size:100%;font:inherit;margin:0;padding:0;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}#___gatsby,body,html{height:100%}body{margin:0}#gatsby-focus-wrapper,div[role=group][tabindex]{height:100%}.blog-body{display:grid;grid-template-rows:auto 1fr auto;min-height:100%}.blogs{align-items:center;display:flex;justify-content:center;margin:4rem}@media(min-width:1000px){.blogs{margin:4rem auto 0;max-width:1000px}}.blogs-container{display:grid;gap:20px}@media(min-width:600px){.blogs-container{max-width:400px}}.article-preview{background:#afafaf;box-shadow:15px 15px 2px #0c0c0c;color:#0c0c0c;display:grid;padding:1rem;transition:all .2s}.article-preview:active,.article-preview:focus,.article-preview:hover{box-shadow:10px 10px 2px #0c0c0c;-webkit-transform:scale(.96);transform:scale(.96)}.article-preview__image{background-size:cover;height:14rem}.article-preview__title{background-color:#1f1f1f;color:#fdfdfd;margin:2rem 0 1rem;padding:.5rem}.article-preview__date{padding:0 .5rem}.article-preview__description{margin:1rem 0;padding:0 .5rem}body,html{height:100%;margin:0;padding:0;width:100%}html{font-size:10px;scroll-behavior:smooth}@media(min-width:600px){html{font-size:12px}}@media(min-width:900px){html{font-size:13px}}@media(min-width:1150px){html{font-size:16px}}@media(min-width:1800px){html{font-size:18px}}body{background-color:#1f1f1f;font-family:DotGothic16,sans-serif;font-size:1.6rem}a,body{color:#fdfdfd}a{text-decoration:none}h5{font-family:DotGothic16,Arial,Helvetica,sans-serif;font-size:2em;margin-top:2rem;text-align:center}h5:before{content:"(Tap Me)"}@media screen and (min-width:900px){h5{font-size:.8em}h5:before{content:"(Hover Me)"}}.header-text{color:#fdfdfd;font-family:DotGothic16,sans-serif;letter-spacing:.8px;line-height:1.5;margin:1.6rem;text-align:center}.header-text .luis{display:block;font-family:Pacifico,cursive;font-size:5rem;-webkit-transform:skewY(-5deg);transform:skewY(-5deg)}.hello{font-size:1.6rem}.full-stack{font-size:2rem}.welcome-btn{-webkit-animation:bounce 2s infinite;animation:bounce 2s infinite;background-color:#1f1f1f;border-radius:3px;color:#fdfdfd;font-size:3rem;margin-bottom:.8rem;padding:30px;transition:all .4s}@-webkit-keyframes bounce{0%,20%,50%,80%,to{-webkit-transform:translateY(0);transform:translateY(0)}40%{-webkit-transform:translateY(-20px);transform:translateY(-20px)}60%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}}@keyframes bounce{0%,20%,50%,80%,to{-webkit-transform:translateY(0);transform:translateY(0)}40%{-webkit-transform:translateY(-20px);transform:translateY(-20px)}60%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}}.welcome-btn:active,.welcome-btn:focus,.welcome-btn:hover{background-color:#fdfdfd;color:#1f1f1f}.about,.projects{margin:1.6rem 1.6rem 7rem}@media(min-width:600px){.about,.projects{padding:0 3.2rem}}@media(min-width:900px){.about,.projects{padding:0 3rem}}.about-description{font-family:DotGothic16,sans-serif;font-size:1.4rem;font-weight:400;line-height:1.2;margin:2rem;max-width:350px;text-align:center}@media(min-width:600px){.about-description{font-size:1.3rem;font-weight:400;line-height:1.5;max-width:500px;text-align:center}}@media(min-width:900px){.about-description{max-width:500px}}@media(min-width:1150px){.about-description{max-width:600px}}.project{text-align:center}@media(min-width:900px){.project{align-items:center;display:flex;justify-content:space-between;margin:75px auto;max-width:1024px}}@media(min-width:1150px){.project{max-width:1200px}}@media(min-width:900px){.project:nth-child(2n){text-align:left}.project:nth-child(odd){flex-direction:row-reverse;text-align:right}}@media(min-width:1800px){.project{line-height:2}}.project__info{margin:4rem auto;max-width:500px}@media(min-width:900px){.project__info{margin:0;max-width:365px}}@media(min-width:1150px){.project__info{max-width:500px}}@media(min-width:900px){.project__info--odd{padding-right:40px}.project__info--even{padding-left:40px}}.project-img{background-position:50%;background-size:contain;border:5px solid #afafaf;box-shadow:15px 15px 2px #0c0c0c;margin:0 auto;position:relative;width:90%}@media(min-width:600px){.project-img{width:500px}}@media(min-width:900px){.project-img{margin:0;width:400px}}@media(min-width:1150px){.project-img{width:600px}}.project-title{font-size:4rem;margin:3rem 0}@media(min-width:900px){.project-title{margin:2rem 0}}.project-title__link{font-family:Pacifico,arial,sans-serif;letter-spacing:.2rem;line-height:1.2}.project__technologies{font-weight:700}.project__screenshot{height:100%;left:0;opacity:1;position:absolute;top:0;transition:all .5s;width:100%;z-index:2}.project__screenshot:focus,.project__screenshot:hover{opacity:0;transition:all .5s}video{display:block;height:100%;width:100%}.project__description{line-height:1.3;margin:3rem 0}@media(min-width:900px){.project__description{font-size:18px;line-height:1.6;margin:2rem 0}}@media(min-width:1150px){.project__description{font-size:20px;line-height:1.8}}.project__link,.project__link:active,.project__link:focus,.project__link:hover{color:#01bdff}.other-projects{margin:6rem auto 0;text-align:center}@media screen and (min-width:900px){.other-projects{margin:3rem auto 0}}.other-projects__title{font-family:Pacifico,arial,sans-serif;font-size:2rem;letter-spacing:.2rem;line-height:1.2}.other-projects__list{line-height:1.5;margin-top:2rem}.other-projects__project{color:#fdfdfd;font-weight:700}.other-projects__project:active,.other-projects__project:focus,.other-projects__project:hover{color:#02a8e4}header{align-items:center;display:flex;flex-direction:column;height:100vh;justify-content:space-between;width:100%}i{font-size:2rem}i:active,i:focus,i:hover{color:#01bdff}.logos{bottom:0;left:56%;position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:1rem}@media(min-width:1150px){.logos{height:28px;width:40px}}.react-container{color:#61dafb;font-family:Roboto,sans-serif;font-size:1.2rem;letter-spacing:-.01px}.react-container:hover{color:#47a3bc}.second-tool-container{color:#1f1f1f;position:relative}.second-tool-container:after{color:#fdfdfd;content:".";position:absolute;right:-12px}.second-tool-container a{color:transparent}.logo-container:hover{color:#1f1f1f}.logos.secondtool{left:50%;margin-left:2px}.logos.secondtool:active,.logos.secondtool:focus,.logos.secondtool:hover{-webkit-filter:hue-rotate(106deg);filter:hue-rotate(106deg)}@media(min-width:1150px){.logos.secondtool{height:20px;width:20px}}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Luis Ortiz | Moment.js to Date-fns Migration</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="192x192" href="favicon/android-icon-192x192.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png"/><link data-react-helmet="true" rel="preconnect" href="https://fonts.googleapis.com"/><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=DotGothic16&amp;family=Pacifico&amp;family=Poiret+One&amp;family=Roboto:wght@700&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"/><link rel="icon" href="/favicon-32x32.png?v=187d8142e83f0c42a50509ee10e892c2" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=187d8142e83f0c42a50509ee10e892c2"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=187d8142e83f0c42a50509ee10e892c2"/><link as="script" rel="preload" href="/webpack-runtime-395ef20634cba802f581.js"/><link as="script" rel="preload" href="/framework-b0d70324045601c1cfe0.js"/><link as="script" rel="preload" href="/app-86c7c266c9fff1cd3b05.js"/><link as="script" rel="preload" href="/component---src-pages-moment-to-date-fns-migration-mdx-e6f11caf23928c980582.js"/><link as="fetch" rel="preload" href="/page-data/moment-to-date-fns-migration/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3413201346.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="desktop-navbar"><div class="menu"><a class="blog-btn-desktop" href="/blog">BLOG</a><a class="home-btn-desktop" href="/">HOME</a><a class="resume-btn-desktop" href="Resume.pdf">RESUME</a></div><div class="social-menu"><a class="email-btn-desktop" href="mailto:ortizlu@icloud.com" target="_blank"><i class="fas fa-envelope"></i></a><a class="linkedin-btn-desktop" href="https://www.linkedin.com/in/ortizlu/" target="_blank"><i class="fab fa-linkedin"></i></a><a class="github-btn-desktop" href="https://github.com/ortizlu" target="_blank"><i class="fab fa-github-square"></i></a></div></div><section class="article-content"><div class="back-btn"><a class="back-btn__link" href="./blog">← BACK</a></div><div class="article-image" style="background-image:url(/static/55d48bddc2d07b8fa7a9d5b324c16a28/21e4c/moment-to-date-fns-migration.jpg);background-position:center"></div><div class="article-body"><h1 class="article-body__title">Moment.js to Date-fns Migration</h1><div class="article-body__date">May 25, 2022</div><div class="article-body__text"><p>During a few of our quarterly innovation sprints (sprints where we focus on new innovative ideas or
approaches), we thought it would be a good idea to sunset Moment.js and migrate to a more modern approach to
dates.</p><h2>Why Did We Migrate?</h2><p>To put it plainly, we were forced to migrate. We received the sad news on September 2020 that Moment.js would
no longer be maintained. Moment.js has served faithfully on a vast number of websites over the history of the
web, but in recent years there have been a surge of more modern and lighter replacements. Additionally, the
bundle size of Moment is large, and the fact that it provides no tree shaking meant that we would have to load
the entire library on every file that used Moment. Lastly, our engineering team was zealous for as much
“correct” practices as possible, so we wanted a library that promoted immutability.</p><p>Sure, we could’ve just used vanilla JS. But for the amount of formatting we did as an investment company, it
made sense to just to use one of the new fancy libraries, which led us to Date-fns.</p><h2>The Process</h2><p>It took a very long time to go through our entire codebase in order to convert every instance of Moment to
Date-fns. We began with our API, storybook, and utilities repos. After those were completed, the busy season
created an awkward hiatus where our engineers had to learn Date-fns if they needed to work on the back-end but
still rendered dates with Moment on the client. But, after a few months later, we finally had enough time to
get to the biggest hurdle, the client, in order to finally nuke Moment.js for good (R.I.P 🪦 ).</p><h2>The Challenges</h2><h3>1. Reading From the Inside-Out</h3><p>The first hurdle was getting through the initial understanding of how Date-fns works. The coolest thing about
Moment was that a function always returned a Moment object, which allowed for chaining, and consequently,
easier-to-read code. For example:</p><deckgo-highlight-code language="js" terminal="none" theme="one-dark">
          <code slot="code">moment().add(1, &quot;months&quot;).format(&quot;MM/DD/YYYY&quot;);</code>
        </deckgo-highlight-code><p>Even if you’ve never used Moment, you can guess pretty easily what&#x27;s happening if you read from left to
right. First, we create a Moment object without any arguments, which defaults to today’s date. We add 1 month, and return a
date string with the format of MM/DD/YYYY. So, if today is May 25, 2022, the resulting string would be <code>05/25/2022</code>.</p><p>But in Date-fns, you would read from the inside out. The same operation would read like this in Date-fns:</p><deckgo-highlight-code language="js" terminal="none" theme="one-dark">
          <code slot="code">format(addMonths(new Date(), 1), &quot;MM/DD/YYYY&quot;);</code>
        </deckgo-highlight-code><p>Notice that the first operation is the deepest: creating a new JS Date object with today’s date. Then, we
wrap that in <code>addMonths()</code>, add 1 as the second parameter, then wrap that in a format function and pass <code>MM/DD/YYYY</code> as the second parameter.</p><h3>2. Replacing <code>moment()</code></h3><p>The second coolest thing about moment is how concise the <code>moment</code> function is at parsing out date strings. Date-fns has a <code>parse</code> function, but it is much more verbose than calling <code>moment()</code>. Which is why created our own helper function to simplify the migration process. You can find the function at the bottom of the article.</p><h2>A Few More Differences</h2><p>But even with some noticeable differences, using Date-fns starts becoming more and more intuitive after a
while. But there were a few more differences we realized we had to keep track of. Firstly, Moment can guess
some formats without even being explicit:</p><deckgo-highlight-code language="js" terminal="none" theme="one-dark">
          <code slot="code">const completionDate = &quot;2020-11-13&quot;;
moment(completionDate).isValid(); //true
isValid(parse(completionDate, &quot;&quot;, new Date())); // true

const completionDateStardard = &quot;11/13/2020&quot;;
moment(completionDateStardard).isValid(); //true
isValid(parse(completionDateStardard, &quot;&quot;, new Date())); // false

const completionDateTwoDigitYear = &quot;11/13/20&quot;;
moment(completionDateTwoDigitYear).isValid(); //true
isValid(parse(completionDateTwoDigitYear, &quot;&quot;, new Date())); // false</code>
        </deckgo-highlight-code><p>Moment can guess the standard US format of MM/DD/YYYY and MM/DD/YY whereas Date-fns cannot. In this case, I
believe it makes more sense to be as explicit as possible, but there were quite a few instances of past
developers letting Moment do the guess work.</p><p>Another difference is the fact that Date-fns does not allow adding floating years and months:</p><deckgo-highlight-code language="js" terminal="none" theme="one-dark">
          <code slot="code">const isOldEnoughMoment = moment(birthday, &quot;MM/DD/YYYY&quot;)
  .add(59.5, &quot;years&quot;)
  .isBefore();

// half years need to be calculated as 6 months with Date-fns
const isOldEnoughDateFns = isBefore(
  addMonths(addYears(parse(birthday, &quot;MM/dd/yyyy&quot;, new Date()), 59), 6),
  new Date()
);</code>
        </deckgo-highlight-code><p>But the biggest headache was working with UTC time. A whole separate blog post could be written about
migrating code that used UTC time, but in summary, the benefit of the Moment object is that it can store time
zone data, whereas vanilla Date objects cannot. Therefore, if we are passing dates over
multiple files, it is important to keep track of what was originally intended with the date. The following is
a small example of what I mean:</p><deckgo-highlight-code language="js" terminal="none" theme="one-dark">
          <code slot="code">import { format as formatTZ, utcToZonedTime } from &quot;date-fns-tz&quot;;

// ---------------------------
// Now in EDT via Moment
// ---------------------------

const nowInESTMoment = moment().tz(&quot;America/New_York&quot;);

// ...in another file
nowInESTMoment.format(&quot;LLL z&quot;); // May 25, 2022 1:55 PM EDT

// ---------------------------
// Now in EDT via Date-fns
// ---------------------------

const nowInETDateFns = utcToZonedTime(new Date(), &quot;America/New_York&quot;);

// ...another file
// Date-fns format without time zone
format(nowInETDateFns, &quot;MMMM d, yyyy p z&quot;); // May 25, 2022 1:55 PM GMT-7

// date-fns-tz format with time zone specified
formatTZ(nowInETDateFns, &quot;MMMM d, yyyy p z&quot;, { timeZone: &quot;America/New_York&quot; }); // May 25, 2022 1:55 PM EDT</code>
        </deckgo-highlight-code><p>Notice that Moment keeps track that the timestamp was converted to EST/EDT and can easily format with the
correct specified time zone. Whereas Date-fns does not have the correct time zone unless we use the
date-fns-tz <code>format()</code> function and explicitly provide the correct time zone.</p><h2>Conclusion</h2><p>Nonetheless, all the hard work eventually paid off, and our bundle size for our app decreased significantly
with the removal of Moment. Date-fns is awesome and will most likely be used in many newer apps for the next
few years. But I look forward to a day where we can use a more native approach, like the upcoming Temporal object!</p><deckgo-highlight-code language="js" terminal="none" theme="one-dark">
          <code slot="code">/**
* Get Date Helper Function for Date-fns
* Parse the input date with a given input format into a Date object
* @param [date] - the date specified in a string, Date, or number
* @param [inputFormat] - what format the input date is currently in, using date-fns format patterns - https://date-fns.org/v2.19.0/docs/format
* @returns a Date object parsed from the input date string, Date, or number
*/

export const getDate = (
  date?: string | Date | number,
  inputFormat?: string,
): Date =&gt; {
  const invalidDate = new Date(&#x27;Invalid Date&#x27;);
  if (date instanceof Date) {
    return date;
  } else if (typeof date === &#x27;number&#x27;) {
    return new Date(date);
  } else if (typeof date === &#x27;string&#x27;) {
    if (typeof inputFormat === &#x27;string&#x27; &amp;&amp; inputFormat !== &#x27;&#x27;) {
      const splitDate = date.split(/[^0-9]/g) || [];
      const firstVal = splitDate[0] || &#x27;&#x27;;
      const secondVal = splitDate[1] || &#x27;&#x27;;
      const thirdVal = splitDate[2] || &#x27;&#x27;;
      // perform extra checks for specific input formats
      switch (inputFormat) {
        case DateFormat.StandardSlash:
          return firstVal.length &lt;= 2 &amp;&amp;
            secondVal.length &lt;= 2 &amp;&amp;
            thirdVal.length === 4
            ? parse(date, inputFormat, new Date())
            : invalidDate;
        case DateFormat.MonthYearSlash:
          return firstVal.length &lt;= 2 &amp;&amp; secondVal.length === 4
            ? parse(date, inputFormat, new Date())
            : invalidDate;
        default:
          return parse(date, inputFormat, new Date());
      }
    } else {
      return parseISO(date);
    }
  } else {
    // moment(undefined, format) returns an Invalid Date object, so need to replicate that behavior here
    return inputFormat ? invalidDate : new Date();
  }</code>
        </deckgo-highlight-code><h2>Related Links</h2><ul><li><a href="https://tc39.es/proposal-temporal/docs/">Temporal Documentation</a></li><li><a href="https://github.com/you-dont-need/You-Dont-Need-Momentjs">You don&#x27;t Need Moment.JS</a></li><li><a href="https://date-fns.org/docs/Getting-Started">Date-fns Documentation</a></li><li><a href="https://unsplash.com/photos/O1_vdzQZwMY">Article Image By Jonas Elia on Unsplash</a></li></ul></div></div></section><div class="circle"><p class="circle__shape circle__text">work with me.</p><a href="mailto:ortizlu@icloud.com" target="_blank" class="circle__email circle__text">ortizlu@icloud<span class="circle__text--blue">.</span>com</a></div><footer class="footer">Luis Ortiz | Copyright  <span class="footer__year">2022</span></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-120625915-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/moment-to-date-fns-migration/";window.___webpackCompilationHash="483d361b134cacbeab62";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0139b8a34c90c901c439.js"],"app":["/app-86c7c266c9fff1cd3b05.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-b229cd6accd052e84879.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-7a94474fd04745cd62b8.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-e48e1352a2877c743794.js"],"component---src-pages-moment-to-date-fns-migration-mdx":["/component---src-pages-moment-to-date-fns-migration-mdx-e6f11caf23928c980582.js"]};/*]]>*/</script><script src="/polyfill-0139b8a34c90c901c439.js" nomodule=""></script><script src="/component---src-pages-moment-to-date-fns-migration-mdx-e6f11caf23928c980582.js" async=""></script><script src="/app-86c7c266c9fff1cd3b05.js" async=""></script><script src="/framework-b0d70324045601c1cfe0.js" async=""></script><script src="/webpack-runtime-395ef20634cba802f581.js" async=""></script></body></html>